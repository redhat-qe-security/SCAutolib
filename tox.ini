[tox]
envlist = flake8, pytest
skipsdist = true

[testenv]
set_env = PYTHONPATH=.

[testenv:flake8]
deps = flake8
commands = flake8 SCAutolib/ test/ setup.py

[testenv:pytest]
deps =
    -rrequirements.txt
    pytest
commands = pytest test/ -sv -m "not ipa and not service_restart" {posargs}


[flake8]
exclude =
    .git,
    __pycache__,
    SCAutolib/scripts,
    SCAutolib/templates
max-complexity = 10
max-line-length = 81
ignore = 
    # Ignore 'value maybe be undefined'
    F405,
    # Ignore warning for using * in import
    F403,
    # Enable bare except statement
    E722,
    # Ignore too complex functions
    C901,
    # Ignore invalid escape sequence for regular expressions
    W605
